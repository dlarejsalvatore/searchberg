var OS=["iphone","ipad","windows","mac","linux"],errCount=0;function SendError(e,t){try{var i=readCookie("VisitorID");null==i&&(i="NF");var r={Error:e.toString(),VisitorID:i,References:t,URL:location.host};networkCall("POST","https://clients.searchberg.com/VisitorTrackingAPI/api/Error/LogError",JSON.stringify(r))}catch(e){if(3==errCount)return;errCount++}}networkCall=function(e,t,i,r){var o=new XMLHttpRequest;o.open(e,t,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onreadystatechange=function(){4==o.readyState&&200==o.status&&r(JSON.parse(o.responseText))},o.send(i)};var pageLoad=function(){try{navigator.getBrowserName=(t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(i[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),i.join(" ")))}catch(e){navigator.getBrowserName="Error"}var e,t,i;try{navigator.getDeviceName=navigator.userAgent.match(/Android/i)?"Android":navigator.userAgent.match(/BlackBerry/i)?"BlackBerry":navigator.userAgent.match(/iPhone|iPad|iPod/i)?"iPhone/iPad":navigator.userAgent.match(/Opera Mini/i)?"Opera":navigator.userAgent.match(/IEMobile/i)?"Windows":navigator.userAgent.match(/DL-AXIS/i)?"Datalogic":navigator.userAgent.match(/EF500/i)?"Bluebird":navigator.userAgent.match(/CT50/i)?"Honeywell":navigator.userAgent.match(/TC70|TC55/i)?"Zebra":void 0}catch(e){navigator.getDeviceName="Error"}checkVisitor()};function readCookie(e){try{for(var t=e+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var o=i[r];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(t))return o.substring(t.length,o.length)}}catch(t){SendError(t,"readCookie() Key: "+e)}}function createCookie(e,t){var i,r,o=location.host;try{1===o.split(".").length?document.cookie=e+"="+t+"; expires=Fri, 31 Dec 9999 02:59:59 GMT; path=/":((r=o.split(".")).shift(),i="."+r.join("."),document.cookie=e+"="+t+"; expires=Fri, 31 Dec 9999 02:59:59 GMT; path=/; domain="+i),null!=readCookie(e)&&readCookie(e)==t||(i="."+o,document.cookie=e+"="+t+"; expires=Fri, 31 Dec 9999 02:59:59 GMT; path=/; domain="+i)}catch(a){SendError(a,"createCookie() "+e+"-"+t+", "+i.toString()+"-"+r.toString()+"-"+o)}}function checkIsEurope(){try{if(null==Intl.DateTimeFormat().resolvedOptions().timeZone)return!0;if(Intl.DateTimeFormat().resolvedOptions().timeZone.toLowerCase().indexOf("europe")>-1)return!0}catch(e){}finally{return!0}}function checkVisitor(){try{var e=readCookie("VisitorID");null!=e&&""!=e?SaveVisit():SaveVisitor()}catch(e){}}function getDate(){return(new Date).toString()}function SaveVisit(){try{var e=readCookie("VisitID"),t=new Date;if(null!=e&&""!=e&&readCookie("Checker")==t.getDate()+"-"+t.getMonth()){var i={VisitorID:readCookie("VisitorID"),VisitID:e,PageURL:window.location.pathname,Parameters:window.location.search};networkCall("POST","https://clients.searchberg.com/VisitorTrackingAPI/api/visitDetail/SaveVisitDetail",JSON.stringify(i))}else networkCall("GET","https://ipinfo.io/json",void 0,function(e){networkCall("POST","https://clients.searchberg.com/VisitorTrackingAPI/api/Visit/SaveVisit",JSON.stringify(getVisitObject(e)),function(e){null!=e&&"-"!=e&&(createCookie("VisitID",e),createCookie("Checker",t.getDate()+"-"+t.getMonth()))})})}catch(e){SendError(e,"SaveVisit()")}}function clearAllCookies(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var i=e[t].indexOf("="),r=i>-1?e[t].substr(0,i):e[t];document.cookie=r+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}function SaveVisitor(){try{networkCall("GET","https://ipinfo.io/json",void 0,function(e){var t={VisitorName:"",Email:"",PhoneNo:"",IPAddress:e.ip,Country:e.country,City:e.city,Company:e.hostname,Visit:getVisitObject(e)};networkCall("POST","https://clients.searchberg.com/VisitorTrackingAPI/api/Visitor/Register",JSON.stringify(t),function(e){if(""!=e&&null!=e){createCookie("VisitorID",e.split("-")[0]),createCookie("VisitID",e.split("-")[1]);var t=new Date;createCookie("Checker",t.getDate()+"-"+t.getMonth())}})})}catch(e){SendError(e,"SaveVisitor()")}}function getOSName(){try{return navigator.userAgent.toLowerCase().match(new RegExp(OS.join("|")))}catch(e){return"Error"}}function getVisitObject(e){try{var t=getOSName(),i={VisitorID:readCookie("VisitorID"),Campaign:"",AdGroup:"",DeviceName:navigator.getDeviceName,BrowserName:navigator.getBrowserName,OSName:"",VisitorSite:window.location.hostname,HostName:e.hostname,TimeZone:"",Language:navigator.language,Location:e.loc,Region:e.region,LastVisitReferror:document.referrer,ScreenResolution:screen.width+"x"+screen.height,UsedKeyword:"",Query:"",PageURL:window.location.pathname,Parameters:window.location.search};try{i.OSName=t.constructor===Array&&t.length>0?t[0]:t}catch(e){i.OSName=""}try{i.TimeZone="undefined"==typeof Intl?"Error":Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){i.TimeZone=""}return i}catch(e){}}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?pageLoad():document.addEventListener("DOMContentLoaded",pageLoad);